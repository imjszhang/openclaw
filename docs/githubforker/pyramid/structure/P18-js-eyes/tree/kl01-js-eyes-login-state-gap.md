# KL34: JS-Eyes 通过 WebSocket 复用用户浏览器环境，填补了内置沙箱浏览器在“带登录态交互”场景的能力空白

> 所属视角：P18-js-eyes
> 上层论点：JS-Eyes 通过 WebSocket 复用用户浏览器环境，填补了内置沙箱浏览器在“带登录态交互”场景的能力空白，支持多浏览器协同与远程控制。

## 支撑论点

### 34.1: JS-Eyes 采用“扩展 + 服务器+Agent"三层架构，通过 WebSocket 协议实现对用户日常浏览器的无损接管

- 逻辑顺序：结构
- 引用 atoms: JE-01, JE-03, JE-04, JE-06, JE-27
- 引用 groups: G34

该架构利用单端口复用策略（HTTP/WS 共用 18080），由 OpenClaw 自动拉起内置服务器，无需用户手动维护独立进程，从而以最小侵入方式建立控制链路。

### 34.2: 系统支持 Chrome、Edge 及 Firefox 多浏览器灵活部署，通过标准化配置实现快速连接与状态探测

- 逻辑顺序：结构
- 引用 atoms: JE-07, JE-08, JE-09, JE-10, JE-05
- 引用 groups: G34

用户仅需解压加载扩展并配置 `openclaw.json` 中的服务地址，即可通过可视化界面确认连接状态，兼容主流浏览器的开发者模式或临时载入机制。

### 34.3: 封装七大核心工具集，赋予 AI Agent 页面导航、脚本注入、Cookie 管理及多目标协同控制的完整能力

- 逻辑顺序：结构
- 引用 atoms: JE-02, JE-12, JE-13, JE-14, JE-15, JE-21, JE-22
- 引用 groups: G34

工具集不仅支持基础的 URL 打开与内容提取，更通过 `target` 参数实现跨浏览器实例的精准控制，且查询类工具默认全局生效以保障上下文完整性。

### 34.4: 针对复杂交互场景提供标准化作业模式，涵盖批量数据提取、登录态校验及框架级表单触发机制

- 逻辑顺序：时间
- 引用 atoms: JE-18, JE-19, JE-20, JE-16
- 引用 groups: G34

Agent 需遵循“先导航后注入”的数据提取流程，并通过检查 Cookie 有效期验证登录状态，同时在自动化填表后手动 dispatch 事件以激活现代前端框架的响应逻辑。

### 34.5: 内置完善的故障诊断机制与平台适配补丁，确保服务在端口冲突或进程隐藏需求下的稳定运行

- 逻辑顺序：程度
- 引用 atoms: JE-23, JE-24, JE-25, JE-17
- 引用 groups: G34

系统提供明确的断连排查指引（如检查 Gateway 日志），支持通过 `netstat` 解决端口占用问题，并在 Windows 平台自动隐藏子进程弹窗以优化用户体验。

### 34.6: 与内置沙箱浏览器形成能力互补，专门解决需继承用户会话状态及非 Chromium 内核的特定业务场景

- 逻辑顺序：程度
- 引用 atoms: JE-26, JE-27, JE-28
- 引用 groups: G34

相较于基于 CDP 协议且仅限 Chromium 的内置浏览器，JS-Eyes 凭借 WebSocket 复用技术，完美覆盖了需利用现有登录态及多核浏览器的长尾需求。

## 论点间关系

本 Key Line 遵循“架构原理 -> 安装配置 -> 工具能力 -> 实战模式 -> 故障排查 -> 场景对比”的逻辑结构。首先阐述 JS-Eyes 的三层架构与设计理念，接着说明多浏览器的安装与配置文件细节，随后详细列出核心工具的功能与参数行为，进而提供典型 Agent 工作流模式，最后涵盖常见故障诊断及与内置浏览器的核心差异对比，层层递进地论证其填补能力空白的价值。

---
