# KL19: 构建标准化分发机制，通过文本元数据驱动、语义搜索索引与安全合规扫描，确立技能流通的基准规范

> 所属视角：P19-skill-distribution
> 上层论点：必须构建“标准化分发机制（元数据/扫描）+ 独立分发体系（自主脚本/多源回退）+ 自动化发现架构（静态注册表/AI 工具链）”的三位一体技能流通闭环，以实现从发布、传输到发现的全链路去中心化与高可用。

## 支撑论点

### 19.1: ClawHub 技能发布需遵循“文本元数据驱动 + 语义搜索索引 + 安全合规扫描”的标准化分发机制

- 逻辑顺序：结构
- 引用 atoms: CH-01, CH-09, CH-11, AF-01
- 引用 groups: G35

ClawHub 作为面向 AI Agent 的公共注册中心，强制要求技能包仅包含文本文件并通过 YAML frontmatter 定义严格元数据，利用向量索引实现语义搜索。同时，集成 VirusTotal 进行自动化安全扫描，对可疑代码行为实施拦截或警告，以平衡生态开放性与系统安全性。

### 19.2: Agent-First 项目必须构建“自主安装脚本 + 多源回退链 + 地域化资源映射”的独立分发体系以解耦市场依赖

- 逻辑顺序：结构
- 引用 atoms: AF-07, AF-13, AF-15, AF-20
- 引用 groups: G36

为规避第三方市场的安全误报与网络限制，项目应提供跨平台的 curl/PowerShell 自主安装脚本作为首选方案。该体系内置“自有域名→GitHub→jsDelivr"的多源回退逻辑与短超时机制，并根据用户地域动态映射资源 URL，确保全链路安装的高可用性与本地化体验。

### 19.3: 技能发现系统应从“手动注册”演进为"GitHub Pages 静态注册表 + AI 工具链”的自动化架构以实现 Agent 友好

- 逻辑顺序：结构
- 引用 atoms: SD-04, SD-05, SD-12, SD-10
- 引用 groups: G37

摒弃易出错的手动配置流程，采用 GitHub Pages 托管的 `skills.json` 静态注册表作为唯一真相来源。结合自动化构建流程解析 SKILL.md 元数据生成注册表，并配套开发 AI 工具链（discover/install），使 Agent 能够自主感知、下载并注册子技能，实现零侵入的自动化发现。

### 19.4: OpenClaw 路径解析存在 State 目录与 Workspace 目录的分离机制，需通过环境变量或配置文件显式对齐以避免 ENOENT 错误

- 逻辑顺序：结构
- 引用 atoms: OP-01, OP-04, OP-07, OP-05
- 引用 groups: G38

OpenClaw 的 State 目录（由 `OPENCLAW_STATE_DIR` 控制）与默认 Workspace 目录（由 `OPENCLAW_HOME` 或系统家目录控制）相互独立，仅设置前者会导致工具链访问错误路径。用户必须通过设置 `OPENCLAW_HOME` 环境变量或在 `openclaw.json` 中显式指定 workspace 路径，以强制对齐存储位置并消除跨盘符部署的 ENOENT 错误。

### 19.5: OpenClaw 的 exec 安全机制通过“分段解析 + 白名单校验 + 动态审批”三重防线，强制阻断高风险的 curl|bash 管道执行模式

- 逻辑顺序：结构
- 引用 atoms: EX-01, EX-03, EX-07, EX-13
- 引用 groups: G39

默认配置下，exec 安全机制将含管道符的命令拆解为独立段进行严格校验，因 bash 和 curl 不在 safeBins 且具备高风险特性，直接执行会被阻断。必须将 `tools.exec.host` 设为 gateway，并在 `exec-approvals.json` 中显式配置 allowlist 或启用 `ask=on-miss` 审批模式，方可放行此类高风险安装指令。

## 论点间关系

上述五个子论点按照技能流通的生命周期逻辑展开：首先确立**标准化发布规范**（19.1）作为生态基石，进而构建**独立分发体系**（19.2）以保障传输链路的自主可控，随后通过**自动化发现架构**（19.3）解决终端接入效率问题，最后辅以**路径对齐**（19.4）与**执行安全审批**（19.5）两项底层基础设施保障，共同构成完整的去中心化技能流通闭环。

---
