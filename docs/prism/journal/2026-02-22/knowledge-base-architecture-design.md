# OpenClaw 个人知识库架构设计过程

记录基于《金字塔原理》构建个人知识库目录架构的完整思考过程。

## 背景

在学习和使用 OpenClaw 的过程中，积累了 20 篇按日期组织的原始学习笔记。这些笔记以时间线排列，适合记录过程，但不适合教学或知识复用。希望按《金字塔原理》进行结构化整理，最终可以产出面向读者的教程。

## 问题分析

原始文档存在几个问题：

1. **按时间组织而非按逻辑组织**：读者进来后不知道"先读什么、再读什么"
2. **主题散落在时间线里**：比如"核心概念"分布在 1/31 和 2/13 两个日期下
3. **深浅混杂**：项目分析报告（宏观）和终端配置（极具体的工具设置）在同一层级
4. **缺少中心论点**：没有"这套内容要传达什么"的核心主张

## 金字塔原理的两种思考方式

### 自上而下

从结论出发，逐层向下拆问题。核心步骤：

1. 确定主题和边界
2. 设想读者的核心疑问（Q）
3. 给出答案（A）——塔尖结论
4. 用 S-C-Q-A 构造序言验证：情境（Situation）→ 冲突（Complication）→ 疑问（Question）→ 答案（Answer）
5. 向下展开：读者接受答案后会继续追问什么？用回答构建下一层
6. 重复展开，每层保证 MECE（不重叠、不遗漏）

适用场景：结论清晰，需要组织表达顺序。

### 自下而上

从素材出发，逐层向上归纳结论。核心步骤：

1. 提取信息单元：把文档打散为不可再拆的最小知识点
2. 分组归纳：按内在逻辑归组，忽略原文档边界
3. 提炼观点句：每组用一句判断句概括
4. 再归纳：观点句继续归组，直到收敛为顶层结论

适用场景：对主题还在探索阶段，结论不确定，需要先从素材中发现规律。

### 两种方式的协作

实际工作中两种方式交替使用：先自下而上从素材中归纳出初步结论，再自上而下验证这个结论能不能撑住、展开顺序是否合理。

## 架构设计决策

### 决策 1：原始日志归入 journal/

原始按日期组织的文档保持不动，统一归入 `journal/` 子目录。作为学习过程的原始记录，不做修改。

### 决策 2：三层架构分离

确立了 journal → pyramid → outputs 的三层结构：

- `journal/`：原始素材（输入）
- `pyramid/`：结构化拆解（处理）
- `outputs/`：面向读者的产出（输出）

三层各司其职，职责单一。教程（tutorial）不再与 journal 和 pyramid 平级，而是作为 outputs 的一种输出格式。

之前曾将 tutorial/ 与 journal/、pyramid/ 并列放在顶层，后来意识到 tutorial 本质上是 pyramid 某个视角的输出产物，不应该跟"整个拆解体系"同级。

### 决策 3：analysis 与 structure 分离

pyramid 内部分为两个阶段：

- `analysis/`（自下而上）：atoms → groups → synthesis
- `structure/`（自上而下）：SCQA → tree → validation

自下而上的终点（synthesis）不等于自上而下的起点（SCQA）。前者是"从素材中发现了什么"（分析视角），后者是"面对读者要传达什么"（表达视角）。两者需要分开存放。

### 决策 4：atoms 按月分子目录

journal 会持续增长。如果 atoms 全部扁平放在一个目录下，100 篇 journal 就会有 100 个文件。采用 `YYYY-MM/` 月度子目录，与 journal 的日期结构呼应，避免扁平膨胀。

### 决策 5：structure 按视角分目录

不同的读者视角会引出不同的 SCQA，进而展开不同的金字塔树。因此 structure/ 不按产物类型分（scqa/、tree/、validation/），而按"视角"分——每个视角一个目录，内含完整的一套 scqa.md + tree/ + validation.md。

考虑过两个方案：

- 方案 A（按产物类型分）：多个 SCQA 共享一棵 tree——适合"入口不同、结构相同"
- 方案 B（按视角分）：每个视角完全独立——适合"不同视角产生不同的知识组织方式"

选择了方案 B，因为不同视角（如开发者 vs 架构评估者）看到的金字塔结构可能完全不同。

analysis/ 是所有视角共享的"素材池"，structure/ 是各视角独立的"组织方案"。

### 决策 6：tree 升级为目录

tree 是整个 pyramid 中最复杂的单一产物。随着金字塔展开，Key Line 下面可能有多层子论点，单文件会膨胀。将 tree 从单文件升级为目录：顶层 README.md 放塔尖 + Key Line 总览，每个 Key Line 一个独立文件。

### 决策 7：scqa 和 validation 保持单文件

判断标准是"产物是否会随素材规模增长"：

| 产物       | 会增长吗           | 组织方式               |
| ---------- | ------------------ | ---------------------- |
| atoms      | 是                 | 目录（按月分）         |
| groups     | 是                 | 目录（带变更日志）     |
| tree       | 是                 | 目录（按 Key Line 分） |
| synthesis  | 缓慢               | 单文件（带修订记录）   |
| scqa       | 不会（固定四要素） | 单文件                 |
| validation | 缓慢               | 单文件（带修订记录）   |

SCQA 是固定结构的设计决策（S-C-Q-A 四要素 + 读者画像），不管 journal 从 20 篇增长到 200 篇，它还是那几段话。而且四个要素之间是一条紧密的逻辑链，拆开会破坏"一眼验证逻辑是否通顺"的价值。

### 决策 8：增量拆解流程文档化

journal 会持续增长，拆解不是一次性的。在 pyramid/README.md 中文档化了增量流程：新 journal → 提取 atoms → 归入 groups → 检查 synthesis → 检查各视角 → 追加修订记录。

所有可能演化的文件（groups/README.md、synthesis.md、validation.md）都预留了变更日志或修订记录段落。

### 决策 9：视角模板化

在 structure/ 下提供 `_template/` 目录，包含 scqa.md、tree/README.md、validation.md 的标准模板。新建视角时复制一份改名即可，降低新建成本，保持格式一致。

## 最终架构

```
docs/githubforker/
├── README.md                          总纲（三层架构全景）
│
├── journal/                           第一层：原始素材
│   └── 2026-MM-DD/*.md               按日期记录，持续增长
│
├── pyramid/                           第二层：结构化拆解
│   ├── README.md                      方法论 + 流程图 + 增量流程 + 进度
│   ├── analysis/                      自下而上（所有视角共享）
│   │   ├── atoms/                     信息单元，按月分目录
│   │   │   ├── README.md             编号规则 + 缩写映射表
│   │   │   ├── 2026-01/*.md
│   │   │   └── 2026-02/*.md
│   │   ├── groups/                    归组，每组一个观点句
│   │   │   └── README.md             分组总览 + 变更日志
│   │   └── synthesis.md               顶层观点候选
│   └── structure/                     自上而下（按视角独立）
│       ├── README.md                  视角总览 + 新建流程
│       ├── _template/                 视角模板
│       │   ├── scqa.md
│       │   ├── tree/README.md
│       │   └── validation.md
│       └── PXX-xxx/                   各视角目录（待创建）
│
└── outputs/                           第三层：面向读者的产出
    ├── README.md                      产出总览 + 视角关联
    └── tutorial/                      教程（基于某个视角）
```

## 设计原则总结

1. **职责分离**：journal 只管记录，pyramid 只管拆解，outputs 只管表达
2. **扩展性优先**：会增长的产物用目录，不会增长的用单文件
3. **共享与隔离**：analysis 共享（一份素材多视角复用），structure 隔离（每个视角独立演化）
4. **增量友好**：每一步的产出都是可用的中间产物，不需要全做完才有价值
5. **可追溯**：从 tree 叶子节点可以一路追到 journal 原文，链路完整
