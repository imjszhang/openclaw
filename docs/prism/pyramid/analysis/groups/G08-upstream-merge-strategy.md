# G08: 大规模上游合并的核心策略是采纳上游架构方向，文档化丢失功能为后续重建铺路

> 当 fork 分支落后上游数千提交时，冲突解决应以上游版本为准保持架构一致性，同时明确记录被覆盖的功能和重建路径，避免知识丢失。

## 包含的 Atoms

| 编号  | 来源                       | 内容摘要                                                           |
| ----- | -------------------------- | ------------------------------------------------------------------ |
| MU-01 | merge-main-upgrade-summary | 合并 3600+ 提交，横跨安全/功能/重构/测试/性能五大领域              |
| MU-14 | merge-main-upgrade-summary | 5 个冲突均采纳 main 版本；shell/shellArgs 功能需基于新架构重新实现 |
| MU-15 | merge-main-upgrade-summary | Breaking changes 枚举化配置 + doctor --fix 自动迁移降低升级风险    |

## 组内逻辑顺序

时间顺序：合并规模与背景（MU-01）→ 冲突解决策略与功能损失记录（MU-14）→ 破坏性变更的平滑迁移机制（MU-15）。从"做了什么"到"怎么解决冲突"到"如何处理不兼容"。
