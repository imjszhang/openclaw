# 序言设计（SCQA）

> 所属视角：P11-cron-heartbeat

## 目标读者画像

| 维度     | 描述                                                                    |
| -------- | ----------------------------------------------------------------------- |
| 角色     | 系统架构师、自动化运维工程师                                            |
| 背景知识 | 熟悉 Cron 调度原理与心跳检测机制，了解 OpenClaw 的多 Agent 会话隔离架构 |
| 核心诉求 | 在保障会话隔离安全的前提下，选择最优的时间精度与执行策略组合            |

## S - 情境（Situation）

OpenClaw 系统的自动化任务执行依赖于 Cron 调度器与 Heartbeat 心跳机制的协同工作，两者共同构成了系统定时任务与健康检查的基础设施。当前的架构设计严格遵循“本地优先网关”与五层抽象模型，其中会话隔离（Session Isolation）是保障多 Agent 并行运行安全性的核心原则。

## C - 冲突（Complication）

在实际落地中，不同的业务场景对“时间精度”有着差异化需求（如秒级轮询 vs 分钟级批处理），同时严格的“会话隔离要求”往往限制了全局共享调度器的使用，导致在追求高精度时可能破坏隔离边界，或在保障隔离时牺牲执行效率，难以直接套用单一模式。

## Q - 疑问（Question）

如何根据具体的时间精度需求与会话隔离等级，对 Cron 调度器与 Heartbeat 机制进行差异化选型与组合，以实现高效且安全的自动化？

## A - 答案（Answer）

必须依据“时间精度需求”与“会话隔离要求”进行差异化选型与组合：高精度短周期任务采用会话内嵌 Heartbeat，低精度长周期任务采用网关层 Cron 分发，以此在确保会话隔离安全的同时实现高效自动化。

## 验证

- [x] S 是否是读者已有的共识？（是，基于 G15 核心架构与 G21 背景）
- [x] C 是否自然地从 S 中产生？（是，隔离性与效率/精度的矛盾是分布式调度的经典痛点）
- [x] Q 是否是 C 的必然追问？（是，解决矛盾必须询问选型策略）
- [x] A 是否直接回答 Q？（是，给出了具体的选型逻辑与组合方式）
- [x] A 是否与 synthesis 的顶层观点一致或有意调整？（是，完全对应 S15 观点）

---

## 修订记录

| 日期       | 变更摘要                                    |
| ---------- | ------------------------------------------- |
| 2026-02-26 | 基于 S15 与 G21 完成 P11 视角 SCQA 初稿设计 |

---
