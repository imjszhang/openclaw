# 序言设计（SCQA）

> 所属视角：P16-plugin-lifecycle

## 目标读者画像

| 维度     | 描述                                                                       |
| -------- | -------------------------------------------------------------------------- |
| 角色     | OpenClaw 核心开发者、第三方插件作者、系统安全审计员                        |
| 背景知识 | 熟悉 Node.js 运行时机制、了解动态加载风险、知晓基础插件架构概念            |
| 核心诉求 | 如何在保障系统绝对安全的前提下，构建灵活、可追溯且标准化的插件开发生命周期 |

## S - 情境（Situation）

OpenClaw 扩展系统已建立起基于“统一注册 API+ 分层发现机制 + 生命周期钩子”的全类型插件生态，支持从 Channel 到 Tool 的标准化扩展。随着生态繁荣，插件来源日益多样化，动态加载成为支撑灵活扩展的核心技术路径。

## C - 冲突（Complication）

然而，动态加载（如 jiti）在提供便利的同时，引入了路径遍历、所有权伪造及恶意代码执行的高危风险；若缺乏严格的运行时约束，单一插件的漏洞即可导致整个宿主系统沦陷，且传统的事后审计难以阻断即时攻击。

## Q - 疑问（Question）

如何构建一套贯穿插件创建、加载到运行全生命周期的安全规范，以在动态扩展的灵活性与系统底线的安全性之间取得平衡？

## A - 答案（Answer）

插件开发生命周期必须严格遵循"SDK 隔离 + 清单驱动 + 安全加载”规范，通过 jiti 动态加载配合严格的路径/所有权检查，构建运行时安全防线。

## 验证

- [x] S 是否是读者已有的共识？（是，基于 G24 建立的扩展生态共识）
- [x] C 是否自然地从 S 中产生？（是，动态加载的便利性必然伴随安全风险）
- [x] Q 是否是 C 的必然追问？（是，解决动态加载风险是核心痛点）
- [x] A 是否直接回答 Q？（是，提出了具体的三重规范作为解决方案）
- [x] A 是否与 synthesis 的顶层观点一致或有意调整？（是，完全对应 S21 观点）

---

## 修订记录

| 日期       | 变更摘要                                                   |
| ---------- | ---------------------------------------------------------- |
| 2026-02-26 | 首次设计，基于 S21/G32/G21 提炼插件生命周期安全视角的 SCQA |
